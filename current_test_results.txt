
> neural-ticker-core@0.3.0 test
> jest

PASS src/modules/market-data/market-data.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

FAIL src/modules/watchlist/watchlist.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

  ‚óè WatchlistService ‚Ä∫ removeItemFromWatchlist ‚Ä∫ should remove items

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "ticker_id": "100",
    +   "id": "100",
        "watchlist_id": "1",
      },

    Number of calls: 1

      129 |       await service.removeItemFromWatchlist(userId, listId, tickerId);
      130 |
    > 131 |       expect(mockItemRepo.delete).toHaveBeenCalledWith({
          |                                   ^
      132 |         watchlist_id: listId,
      133 |         ticker_id: tickerId,
      134 |       });

      at Object.<anonymous> (modules/watchlist/watchlist.service.spec.ts:131:35)

PASS src/modules/ticker-requests/ticker-requests.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/research/research.digest.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

FAIL src/modules/users/admin.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

  ‚óè AdminController ‚Ä∫ should be defined

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getUsers ‚Ä∫ should return all users

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getUserlist ‚Ä∫ should return allowed users

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getIdentities ‚Ä∫ should return unified identities

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should add email to userlist

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should use provided addedBy

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should throw if email missing

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ revokeAccess ‚Ä∫ should revoke email access

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ rejectWaitlistUser ‚Ä∫ should delete waitlist user

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

PASS src/modules/research/research.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      NotificationsService: [class NotificationsService]

      at Object.<anonymous> (modules/research/research.service.spec.ts:20:9)

PASS src/modules/users/users.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/research/research.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/portfolio/portfolio.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/market-data/news.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/market-data/market-data-bulk.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80661  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[RiskRewardService] [39m[31mFailed to generate analysis for INVALID from note note-1: Ticker not found[39m
PASS src/modules/stocktwits/stocktwits.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/tickers/tickers.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/auth/auth.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/risk-reward/risk-reward.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mFinnhub fetch error for UNKNOWN: API error[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mUnexpected Yahoo fallback error for UNKNOWN: Cannot read properties of undefined (reading 'catch')[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mFailed to download logo from https://logo.com/aapl.png: Cannot read properties of undefined (reading 'content-type')[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mUnexpected Yahoo fallback error for BAD: Cannot read properties of undefined (reading 'catch')[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mFinnhub fetch error for TEST: Network error[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mUnexpected Yahoo fallback error for TEST: Cannot read properties of undefined (reading 'catch')[39m
[31m[Nest] 80663  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[TickersService] [39m[31mFailed to download logo from https://bad.com: Network error[39m
PASS src/modules/tickers/tickers.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/tickers/ticker-detail.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.error
      Error getting snapshot for INVALID: Error: Ticker not found
          at Object.<anonymous> (/Users/branislavlang/Documents/GitHub/neural-ticket-core/src/modules/tickers/ticker-detail.controller.spec.ts:111:9)
          at Promise.finally.completed (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-runner/build/testWorker.js:277:16)
          at runTest (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-runner/build/testWorker.js:345:7)
          at Object.worker (/Users/branislavlang/Documents/GitHub/neural-ticket-core/node_modules/jest-runner/build/testWorker.js:499:12)

      41 |       snapshot = await this.marketDataService.getSnapshot(symbol);
      42 |     } catch (e) {
    > 43 |       console.error(`Error getting snapshot for ${symbol}:`, e);
         |               ^
      44 |       throw e;
      45 |     }
      46 |

      at TickerDetailController.getCompositeData (modules/tickers/ticker-detail.controller.ts:43:15)
      at Object.<anonymous> (modules/tickers/ticker-detail.controller.spec.ts:114:7)

PASS src/modules/jobs/jobs.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/auth/auth.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/risk-reward/risk-reward.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/market-data/market-data.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80660  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[StockTwitsService] [39m[31mFailed to fetch posts for AAPL: Network error[39m
[31m[Nest] 80660  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[StockTwitsService] [39m[31mFailed to track watchers for AAPL: Network error[39m
PASS src/modules/stocktwits/stocktwits.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/watchlist/watchlist.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/users/users.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/social/social.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80661  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[FinnhubService] [39m[31mFinnhub API Error [AAPL]: API Error[39m
[31m[Nest] 80661  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[FinnhubService] [39m[31mFinnhub API Error [marketStatus-US]: Forbidden[39m
PASS src/modules/finnhub/finnhub.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/social/social.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/llm/llm.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39m[31mFailed to proxy image: https://evil.com/image.png[39m
[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39mBadRequestException: Only finnhub.io images are allowed
    at ProxyController.proxyImage [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.ts:45:15[90m)[39m
    at Object.<anonymous> [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.spec.ts:55:24[90m)[39m
    at Promise.finally.completed [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1557:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1497:10[90m)[39m
    at _callCircusTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1007:40[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:947:3[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:862:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at run [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:761:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1918:21[90m)[39m
    at jestAdapter [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/runner.js:101:19[90m)[39m
    at runTestInternal [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:277:16[90m)[39m
    at runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:345:7[90m)[39m
    at Object.worker [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:499:12[90m)[39m {
  response: {
    message: [32m'Only finnhub.io images are allowed'[39m,
    error: [32m'Bad Request'[39m,
    statusCode: [33m400[39m
  },
  status: [33m400[39m,
  options: {}
}
[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39m[31mFailed to proxy image: https://evilfinnhub.io/image.png[39m
[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39mBadRequestException: Only finnhub.io images are allowed
    at ProxyController.proxyImage [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.ts:45:15[90m)[39m
    at Object.<anonymous> [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.spec.ts:69:24[90m)[39m
    at Promise.finally.completed [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1557:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1497:10[90m)[39m
    at _callCircusTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1007:40[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:947:3[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:862:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at run [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:761:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1918:21[90m)[39m
    at jestAdapter [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/runner.js:101:19[90m)[39m
    at runTestInternal [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:277:16[90m)[39m
    at runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:345:7[90m)[39m
    at Object.worker [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:499:12[90m)[39m {
  response: {
    message: [32m'Only finnhub.io images are allowed'[39m,
    error: [32m'Bad Request'[39m,
    statusCode: [33m400[39m
  },
  status: [33m400[39m,
  options: {}
}
[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39m[31mFailed to proxy image: https://static.finnhub.io/logo/aapl.png[39m
[31m[Nest] 80658  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[ProxyController] [39mError: Network Error
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.spec.ts:111:26
    at Observable.init [as _subscribe] [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/observable/throwError.ts:123:68[90m)[39m
    at Observable._trySubscribe [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/Observable.ts:235:19[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/Observable.ts:225:18
    at Object.errorContext [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/util/errorContext.ts:29:5[90m)[39m
    at Observable.subscribe [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/Observable.ts:211:5[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/firstValueFrom.ts:73:12
    at new Promise (<anonymous>)
    at firstValueFrom [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mrxjs[24m/src/internal/firstValueFrom.ts:58:10[90m)[39m
    at ProxyController.proxyImage [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.ts:50:44[90m)[39m
    at Object.<anonymous> [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/proxy/proxy.controller.spec.ts:120:24[90m)[39m
    at Promise.finally.completed [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1557:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1497:10[90m)[39m
    at _callCircusTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1007:40[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:947:3[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:862:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at run [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:761:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1918:21[90m)[39m
    at jestAdapter [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/runner.js:101:19[90m)[39m
    at runTestInternal [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:277:16[90m)[39m
    at runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:345:7[90m)[39m
    at Object.worker [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:499:12[90m)[39m
[31m[Nest] 80660  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[QualityScoringService] [39m[31mFailed to score note: LLM Failed[39m
PASS src/modules/research/quality-scoring.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/proxy/proxy.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80662  - [39m01/13/2026, 5:05:34 PM [31m  ERROR[39m [38;5;3m[YahooFinanceService] [39m[31mQuote fetch failed for AAPL: API Error[39m
PASS src/modules/yahoo-finance/yahoo-finance.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/users/credit.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/llm/providers/gemini.provider.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/users/nickname-generator.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/auth/guards/google-auth.guard.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [GoogleAuthGuard] Generated Options: { callbackURL: 'https://example.com/callback', state: undefined }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

    console.log
      [GoogleAuthGuard] Generated Options: {
        callbackURL: 'https://myapp.com/api/auth/google/callback',
        state: undefined
      }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

    console.log
      [GoogleAuthGuard] Generated Options: {
        callbackURL: 'https://example.com/callback',
        state: '{"intent":"waitlist"}'
      }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

    console.log
      [GoogleAuthGuard] Generated Options: { callbackURL: 'https://example.com/callback', state: undefined }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

    console.log
      [GoogleAuthGuard] Generated Options: {
        callbackURL: 'https://myapp.com/api/auth/google/callback',
        state: undefined
      }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

    console.log
      [GoogleAuthGuard] Generated Options: {
        callbackURL: 'http://localhost:3000/api/auth/google/callback',
        state: undefined
      }

      at GoogleAuthGuard.getAuthenticateOptions (modules/auth/guards/google-auth.guard.ts:39:13)

[31m[Nest] 80660  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[FirebaseService] [39m[31m[FATAL] Invalid Firebase Credentials! Missing private_key or client_email. Found keys: client_email[39m
PASS src/modules/firebase/firebase.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80662  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[GoogleAuthExceptionFilter] [39m[31mGoogle Auth Failed: User test@example.com is not on the invite list[39m
[31m[Nest] 80662  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[GoogleAuthExceptionFilter] [39m[31mGoogle Auth Failed: Some other authentication error[39m
[31m[Nest] 80662  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[GoogleAuthExceptionFilter] [39m[31mGoogle Auth Failed: string error[39m
[31m[Nest] 80662  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[GoogleAuthExceptionFilter] [39m[31mGoogle Auth Failed: Auth error[39m
PASS src/modules/auth/filters/google-auth-exception.filter.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/health/health.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/common/transformers/column-numeric.transformer.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/lib/verdict.util.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/market-data/market-status.service.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80659  - [39m01/13/2026, 5:05:35 PM [31m  ERROR[39m [38;5;3m[OpenAiProvider] [39m[31mOpenAI call failed: Rate limit exceeded[39m
PASS src/modules/llm/providers/openai.provider.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/modules/auth/guards/roles.guard.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS src/app.controller.spec.ts
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

[31m[Nest] 80657  - [39m01/13/2026, 5:05:38 PM [31m  ERROR[39m [38;5;3m[JobsService] [39m[31mFailed to sync FAIL: Sync failed[39m
[31m[Nest] 80657  - [39m01/13/2026, 5:05:39 PM [31m  ERROR[39m [38;5;3m[JobsService] [39m[31mDaily candle sync failed globally[39m
[31m[Nest] 80657  - [39m01/13/2026, 5:05:39 PM [31m  ERROR[39m [38;5;3m[JobsService] [39mError: Global fail
    at Object.<anonymous> [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39msrc/modules/jobs/jobs.service.spec.ts:102:9[90m)[39m
    at Promise.finally.completed [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1557:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1497:10[90m)[39m
    at _callCircusTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1007:40[90m)[39m
    at _runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:947:3[90m)[39m
    at [90m/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:862:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at _runTestsForDescribeBlock [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:857:11[90m)[39m
    at run [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:761:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/jestAdapterInit.js:1918:21[90m)[39m
    at jestAdapter [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-circus[24m/build/runner.js:101:19[90m)[39m
    at runTestInternal [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:277:16[90m)[39m
    at runTest [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:345:7[90m)[39m
    at Object.worker [90m(/Users/branislavlang/Documents/GitHub/neural-ticket-core/[39mnode_modules/[4mjest-runner[24m/build/testWorker.js:499:12[90m)[39m
PASS src/modules/jobs/jobs.service.spec.ts (7.578 s)
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (35) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)


Summary of all failing tests
FAIL modules/watchlist/watchlist.service.spec.ts
  ‚óè WatchlistService ‚Ä∫ removeItemFromWatchlist ‚Ä∫ should remove items

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "ticker_id": "100",
    +   "id": "100",
        "watchlist_id": "1",
      },

    Number of calls: 1

      129 |       await service.removeItemFromWatchlist(userId, listId, tickerId);
      130 |
    > 131 |       expect(mockItemRepo.delete).toHaveBeenCalledWith({
          |                                   ^
      132 |         watchlist_id: listId,
      133 |         ticker_id: tickerId,
      134 |       });

      at Object.<anonymous> (modules/watchlist/watchlist.service.spec.ts:131:35)

FAIL modules/users/admin.controller.spec.ts
  ‚óè AdminController ‚Ä∫ should be defined

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getUsers ‚Ä∫ should return all users

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getUserlist ‚Ä∫ should return allowed users

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ getIdentities ‚Ä∫ should return unified identities

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should add email to userlist

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should use provided addedBy

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ addToUserlist ‚Ä∫ should throw if email missing

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ revokeAccess ‚Ä∫ should revoke email access

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)

  ‚óè AdminController ‚Ä∫ rejectWaitlistUser ‚Ä∫ should delete waitlist user

    Nest can't resolve dependencies of the AdminController (UsersService, CreditService, ?, PortfolioService, ResearchService). Please make sure that the argument WatchlistService at index [2] is available in the RootTestModule context.

    Potential solutions:
    - Is RootTestModule a valid NestJS module?
    - If WatchlistService is a provider, is it part of the current RootTestModule?
    - If WatchlistService is exported from a separate @Module, is that module imported within RootTestModule?
      @Module({
        imports: [ /* the Module containing WatchlistService */ ]
      })

    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors

      26 |
      27 |   beforeEach(async () => {
    > 28 |     const module: TestingModule = await Test.createTestingModule({
         |                                   ^
      29 |       controllers: [AdminController],
      30 |       providers: [
      31 |         {

      at TestingInjector.lookupComponentInParentModules (../node_modules/@nestjs/core/injector/injector.js:286:19)
      at TestingInjector.resolveComponentWrapper (../node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../node_modules/@nestjs/core/injector/injector.js:140:38)
          at async Promise.all (index 2)
      at TestingInjector.resolveConstructorParams (../node_modules/@nestjs/core/injector/injector.js:169:27)
      at TestingInjector.loadInstance (../node_modules/@nestjs/core/injector/injector.js:75:13)
      at TestingInjector.loadController (../node_modules/@nestjs/core/injector/injector.js:94:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 1)
      at TestingInstanceLoader.createInstances (../node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (modules/users/admin.controller.spec.ts:28:35)


Test Suites: 2 failed, 1 skipped, 43 passed, 45 of 46 total
Tests:       10 failed, 1 skipped, 359 passed, 370 total
Snapshots:   0 total
Time:        8.216 s
Ran all test suites.
