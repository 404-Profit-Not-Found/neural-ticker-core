
> neural-ticker-core@0.3.0 test:cov
> jest --coverage

--------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                                        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                                                                                                                
--------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                                   |   53.83 |    46.32 |   47.74 |   53.69 |                                                                                                                                                                                                                                                  
 src                                        |     100 |       75 |     100 |     100 |                                                                                                                                                                                                                                                  
  app.controller.ts                         |     100 |       75 |     100 |     100 | 8                                                                                                                                                                                                                                                
  app.service.ts                            |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
 src/common/middleware                      |   33.33 |        0 |       0 |      20 |                                                                                                                                                                                                                                                  
  request-logger.middleware.ts              |   33.33 |        0 |       0 |      20 | 6-21                                                                                                                                                                                                                                             
 src/common/transformers                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
  column-numeric.transformer.ts             |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
 src/config                                 |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                  
  risk-algorithm.config.ts                  |       0 |      100 |     100 |       0 | 1                                                                                                                                                                                                                                                
  validation.ts                             |       0 |        0 |       0 |       0 | 1-94                                                                                                                                                                                                                                             
 src/database                               |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
  typeorm.test.config.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
 src/lib                                    |    1.75 |        0 |       0 |    2.32 |                                                                                                                                                                                                                                                  
  verdict.util.ts                           |    1.75 |        0 |       0 |    2.32 | 48-121                                                                                                                                                                                                                                           
 src/migrations                             |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                  
  1734560000000-InitialSync.ts              |       0 |        0 |       0 |       0 | 3-156                                                                                                                                                                                                                                            
  1734636000000-ChangeExternalIdToText.ts   |       0 |      100 |       0 |       0 | 3-13                                                                                                                                                                                                                                             
  1765923111737-AddIsHiddenToTickers.ts     |       0 |      100 |       0 |       0 | 3-11                                                                                                                                                                                                                                             
  1765923111750-CreatePortfolioPositions.ts |       0 |        0 |       0 |       0 | 1-101                                                                                                                                                                                                                                            
  add-research-enhancements.ts              |       0 |      100 |       0 |       0 | 3-55                                                                                                                                                                                                                                             
  cleanup-stale-data.ts                     |       0 |      100 |       0 |       0 | 3-15                                                                                                                                                                                                                                             
  rename-symbols-to-tickers.ts              |       0 |        0 |       0 |       0 | 1-115                                                                                                                                                                                                                                            
 src/modules/auth                           |   95.96 |    80.88 |   94.44 |   95.61 |                                                                                                                                                                                                                                                  
  auth.controller.ts                        |     100 |    83.33 |     100 |     100 | 34-61                                                                                                                                                                                                                                            
  auth.service.ts                           |   98.48 |    84.09 |     100 |   98.43 | 184                                                                                                                                                                                                                                              
  jwt-auth.guard.ts                         |   69.23 |       50 |      50 |   63.63 | 13-20                                                                                                                                                                                                                                            
  public.decorator.ts                       |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
 src/modules/auth/decorators                |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
  roles.decorator.ts                        |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
 src/modules/auth/filters                   |     100 |       90 |     100 |     100 |                                                                                                                                                                                                                                                  
  google-auth-exception.filter.ts           |     100 |       90 |     100 |     100 | 9                                                                                                                                                                                                                                                
 src/modules/auth/guards                    |     100 |     90.9 |     100 |     100 |                                                                                                                                                                                                                                                  
  google-auth.guard.ts                      |     100 |    91.66 |     100 |     100 | 7                                                                                                                                                                                                                                                
  roles.guard.ts                            |     100 |       90 |     100 |     100 | 7                                                                                                                                                                                                                                                
 src/modules/auth/strategies                |      40 |    32.43 |       0 |   33.33 |                                                                                                                                                                                                                                                  
  google.strategy.ts                        |   36.36 |    31.57 |       0 |      30 | 10-56                                                                                                                                                                                                                                            
  jwt.strategy.ts                           |   44.44 |    33.33 |       0 |    37.5 | 10-42                                                                                                                                                                                                                                            
 src/modules/finnhub                        |   40.25 |    32.35 |      40 |   38.66 |                                                                                                                                                                                                                                                  
  finnhub.service.ts                        |   40.25 |    32.35 |      40 |   38.66 | 39-40,55-56,65-138,149-169,185                                                                                                                                                                                                                   
 src/modules/firebase                       |   63.82 |    61.76 |   66.66 |   62.22 |                                                                                                                                                                                                                                                  
  firebase.service.ts                       |   63.82 |    61.76 |   66.66 |   62.22 | 37-43,58-73,103-114                                                                                                                                                                                                                              
 src/modules/health                         |     100 |       80 |     100 |     100 |                                                                                                                                                                                                                                                  
  health.controller.ts                      |     100 |       80 |     100 |     100 | 13                                                                                                                                                                                                                                               
 src/modules/jobs                           |   40.36 |    37.66 |   37.93 |    40.5 |                                                                                                                                                                                                                                                  
  jobs.controller.ts                        |   81.25 |    83.33 |   71.42 |      80 | 45-47,80-82                                                                                                                                                                                                                                      
  jobs.service.ts                           |   33.33 |     33.8 |   27.27 |   33.52 | 33-75,83-84,119-244,249-250,292-293,329,337-355,374-397,402-460                                                                                                                                                                                  
 src/modules/llm                            |   66.03 |    53.33 |      50 |   67.34 |                                                                                                                                                                                                                                                  
  llm.service.ts                            |   66.03 |    53.33 |      50 |   67.34 | 33,90-122                                                                                                                                                                                                                                        
 src/modules/llm/providers                  |   65.93 |    46.47 |    87.5 |   66.26 |                                                                                                                                                                                                                                                  
  gemini.provider.ts                        |   56.33 |     43.1 |      80 |   56.92 | 72-121,159-179,198-202                                                                                                                                                                                                                           
  openai.provider.ts                        |     100 |    61.53 |     100 |     100 | 11-21,43-57                                                                                                                                                                                                                                      
 src/modules/market-data                    |   32.11 |    29.77 |   18.81 |   33.14 |                                                                                                                                                                                                                                                  
  market-data-bulk.controller.ts            |   91.66 |    18.18 |   66.66 |      90 | 94                                                                                                                                                                                                                                               
  market-data.controller.ts                 |   56.41 |    29.41 |   57.14 |   54.05 | 114,121-144                                                                                                                                                                                                                                      
  market-data.service.ts                    |   27.65 |    29.45 |   13.58 |   29.29 | 54-99,107-108,120,172-201,230,234,238,248-269,295,303-384,405-438,458-461,471-475,506-832,854,872-881,924-1087,1107,1145-1310,1436,1444,1452,1460,1478,1482-1484,1502-1509,1545-1562,1575,1577,1579,1583,1587,1589,1591,1593,1671-1870,1877-1889 
  news.controller.ts                        |   58.06 |     40.9 |   28.57 |   55.17 | 50-64,75,85,119-126                                                                                                                                                                                                                              
  stats.controller.ts                       |      75 |       75 |       0 |      70 | 16,30,45                                                                                                                                                                                                                                         
 src/modules/notifications                  |   53.48 |       75 |       0 |   48.71 |                                                                                                                                                                                                                                                  
  notifications.controller.ts               |   63.63 |       75 |       0 |      60 | 28,33-34,45,52-53,61,68                                                                                                                                                                                                                          
  notifications.service.ts                  |   42.85 |       75 |       0 |   36.84 | 10-67                                                                                                                                                                                                                                            
 src/modules/portfolio                      |   78.44 |    59.63 |      50 |   78.18 |                                                                                                                                                                                                                                                  
  portfolio.controller.ts                   |   69.56 |    47.72 |       0 |   66.66 | 25,33,39,49,56,81,93                                                                                                                                                                                                                             
  portfolio.service.ts                      |   80.64 |    67.69 |   73.33 |   80.89 | 115-136,148,225,236,248,274,281,297,306                                                                                                                                                                                                          
 src/modules/proxy                          |     100 |       80 |     100 |     100 |                                                                                                                                                                                                                                                  
  proxy.controller.ts                       |     100 |       80 |     100 |     100 | 21,62                                                                                                                                                                                                                                            
 src/modules/research                       |   54.34 |    42.64 |   50.94 |    53.7 |                                                                                                                                                                                                                                                  
  quality-scoring.service.ts                |   80.76 |    71.42 |     100 |   79.16 | 88-89,94,99-102                                                                                                                                                                                                                                  
  research.controller.ts                    |   91.13 |    65.51 |   69.23 |    90.9 | 264,273,419,434-437,449-450                                                                                                                                                                                                                      
  research.service.ts                       |   44.22 |    37.83 |    42.1 |    43.6 | 58,158-159,170-618,628,640,649,709-711,718-719,739,774-854,872-875,892,974,1062-1118,1126-1142                                                                                                                                                   
 src/modules/research/guards                |   23.07 |    27.27 |       0 |   17.39 |                                                                                                                                                                                                                                                  
  credit.guard.ts                           |   23.07 |    27.27 |       0 |   17.39 | 13-51                                                                                                                                                                                                                                            
 src/modules/risk-reward                    |   87.15 |    80.97 |    86.2 |   86.98 |                                                                                                                                                                                                                                                  
  risk-reward.controller.ts                 |     100 |    83.33 |     100 |     100 | 19                                                                                                                                                                                                                                               
  risk-reward.service.ts                    |   86.59 |     80.9 |   85.18 |   86.48 | 110-118,215-219,491-494,507-510,516,521-537,706-710,726-730                                                                                                                                                                                      
 src/modules/social                         |     100 |    78.94 |     100 |     100 |                                                                                                                                                                                                                                                  
  social.controller.ts                      |     100 |       75 |     100 |     100 | 17                                                                                                                                                                                                                                               
  social.service.ts                         |     100 |       80 |     100 |     100 | 12-14                                                                                                                                                                                                                                            
 src/modules/stocktwits                     |     100 |    72.34 |     100 |     100 |                                                                                                                                                                                                                                                  
  stocktwits.controller.ts                  |     100 |     62.5 |     100 |     100 | 33,64-65                                                                                                                                                                                                                                         
  stocktwits.service.ts                     |     100 |    74.35 |     100 |     100 | 17-21,52-55,124-131                                                                                                                                                                                                                              
 src/modules/ticker-requests                |   38.18 |     37.5 |       0 |   36.17 |                                                                                                                                                                                                                                                  
  ticker-requests.controller.ts             |      65 |       50 |       0 |    64.7 | 28,37-38,47,59,68                                                                                                                                                                                                                                
  ticker-requests.service.ts                |   22.85 |    33.33 |       0 |      20 | 15-83                                                                                                                                                                                                                                            
 src/modules/tickers                        |   60.15 |    47.88 |   44.82 |   59.36 |                                                                                                                                                                                                                                                  
  ticker-detail.controller.ts               |   78.78 |    85.29 |   45.45 |   77.41 | 53-63,156-159                                                                                                                                                                                                                                    
  tickers.controller.ts                     |   76.08 |    66.66 |   41.66 |   76.74 | 77-78,94,109,126-127,162-163,197,214                                                                                                                                                                                                             
  tickers.service.ts                        |   52.94 |       40 |   45.71 |   51.97 | 46,52,73,105-109,116-158,195-197,216,263,312-322,329-389,398-500,529-578                                                                                                                                                                         
 src/modules/users                          |   83.13 |    65.43 |   83.33 |   86.46 |                                                                                                                                                                                                                                                  
  admin.controller.ts                       |   93.33 |    72.72 |   77.77 |   92.59 | 84,93                                                                                                                                                                                                                                            
  credit.service.ts                         |   75.86 |    33.33 |   66.66 |   82.35 | 18-27,61-62                                                                                                                                                                                                                                      
  nickname-generator.service.ts             |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                  
  users.controller.ts                       |   96.29 |    72.22 |   85.71 |      96 | 103                                                                                                                                                                                                                                              
  users.service.ts                          |      80 |    71.57 |   89.47 |   83.89 | 82-84,138,143,167-183,217-222,242                                                                                                                                                                                                                
 src/modules/watchlist                      |    69.3 |    61.11 |   68.18 |   69.47 |                                                                                                                                                                                                                                                  
  watchlist.controller.ts                   |   87.09 |       75 |      75 |    86.2 | 70,93,191-192                                                                                                                                                                                                                                    
  watchlist.service.ts                      |   61.42 |    58.69 |   64.28 |   62.12 | 34,69-76,98,106,131,171-225                                                                                                                                                                                                                      
 src/modules/yahoo-finance                  |   71.87 |       50 |   83.33 |      70 |                                                                                                                                                                                                                                                  
  yahoo-finance.service.ts                  |   71.87 |       50 |   83.33 |      70 | 24-30,64-65,88-89,101-102                                                                                                                                                                                                                        
 src/scripts                                |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                  
  test-models.ts                            |       0 |        0 |       0 |       0 | 1-97                                                                                                                                                                                                                                             
  test-openai-models.ts                     |       0 |        0 |       0 |       0 | 1-114                                                                                                                                                                                                                                            
 src/utils                                  |    9.33 |     9.61 |   14.28 |    9.85 |                                                                                                                                                                                                                                                  
  banner.util.ts                            |       0 |        0 |       0 |       0 | 2-119                                                                                                                                                                                                                                            
  error.util.ts                             |   33.33 |    20.83 |     100 |   38.88 | 12-23,33-42                                                                                                                                                                                                                                      
--------------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
