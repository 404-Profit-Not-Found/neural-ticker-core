name: Refresh Portfolios

on:
  schedule:
    # Run every 5 minutes (Fastest allowed by GitHub Actions)
    - cron: '*/5 * * * *'
  workflow_dispatch:

permissions: {}

jobs:
  refresh:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Portfolio Refresh
        run: |
          curl -X POST ${{ vars.CLOUD_RUN_URL }}/api/v1/tickers/cron/refresh-portfolios \
          -H "Content-Type: application/json" \
          -H "X-Cron-Secret: ${{ secrets.CRON_SECRET }}"
